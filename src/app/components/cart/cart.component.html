<div><h2>Shopping Cart</h2></div>
<div class="p-grid p-justify-center">
  <div class="p-col-12 p-md-10 p-lg-8">
    <p-card title="Shopping Cart">
      <p-table [value]="cartItems" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th class="p-text-center">Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-i="rowIndex">
          <tr>
            <td>{{ item.product.productName }}</td>
            <td>{{ item.product.price | currency }}</td>
            <td>
              <input
                type="number"
                pInputText
                [(ngModel)]="item.quantity"
                [min]="1"
                [max]="item.product.stock"
                (change)="updateQuantity(i, item.quantity)"
                class="p-inputtext-sm"
                style="width: 60px"
              />
            </td>
            <td>{{ item.product.price * item.quantity | currency }}</td>
            <td class="p-text-center">
              <p-button
                icon="pi pi-trash"
                severity="danger"
                (onClick)="removeItem(i)"
              ></p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>
<div class="flex justify-content-end mt-2">
  <button
    pButton
    type="button"
    label="Checkout"
    icon="pi pi-check"
    (click)="checkout()"
  ></button>
</div>

<p-toast></p-toast>
